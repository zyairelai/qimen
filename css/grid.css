/* --- Webview 兼容修复版 (移除所有新技术，改用最稳方案) --- */

/* 基础重置 */
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    background-color: #f8fafc;
    -webkit-text-size-adjust: 100%;
}

.grid-container { 
    margin: 10px auto; 
    width: 95%; 
    max-width: 500px; 
    /* 解决旧版 WebView 不支持 aspect-ratio 的问题 */
    height: 95vw; 
    max-height: 500px;
    display: block; /* 改用 block 配合 float 或绝对定位的兼容性更好 */
    position: relative;
    background: #475569; 
    border: 3px solid #475569; 
    box-sizing: border-box;
}

/* 强制让格子变成 3x3 */
.grid-item { 
    float: left;
    width: 33.33%;
    height: 33.33%;
    background: #ffffff; 
    position: relative; 
    box-sizing: border-box;
    border: 1px solid #475569; /* 模拟 gap */
    overflow: hidden;
}

/* 1. 宫位名称：使用 px 保证最起码的清晰度 */
.grid-item .position { 
    position: absolute; 
    bottom: 2px; 
    width: 100%;
    left: 0;
    text-align: center;
    font-size: 12px; 
    color: #94a3b8; 
    white-space: nowrap; 
}

/* 2. 中轴线三元素：使用百分比高度定位 */
.grid-item .shen {
    position: absolute;
    top: 8%;
    width: 100%;
    left: 0;
    text-align: center;
    font-size: 18px;
    font-weight: 800;
}

.grid-item .star {
    position: absolute;
    top: 32%;
    width: 100%;
    left: 0;
    text-align: center;
    font-size: 22px;
    font-weight: 600;
}

.grid-item .door {
    position: absolute;
    top: 56%;
    width: 100%;
    left: 0;
    text-align: center;
    font-size: 22px;
    font-weight: 700;
}

/* 3. 侧边天干 */
.grid-item .ji-gan,
.grid-item .tianpan-gan {
    position: absolute;
    top: 42%; 
    margin-top: -10px; /* 垂直居中微调 */
    font-weight: bold;
    font-size: 18px;
    z-index: 5;
}

.grid-item .ji-gan { left: 4px; }
.grid-item .tianpan-gan { right: 4px; }

/* 4. 地盘干 */
.grid-item .dipan-gan {
    position: absolute;
    right: 4px;
    bottom: 12%; 
    font-size: 18px;
    font-weight: bold;
    z-index: 5;
}

/* 5. 时干红框特殊处理：针对内联样式的 outline 进行强制修正 */
.grid-item span {
    display: inline-block;
}

/* 针对小屏幕，通过简单的缩放来防止挤压 */
@media (max-width: 360px) {
    .grid-item .star, .grid-item .door { font-size: 18px; }
    .grid-item .shen, .grid-item .ji-gan, .grid-item .tianpan-gan, .grid-item .dipan-gan { font-size: 15px; }
}

/* 清楚浮动 */
.grid-container::after {
    content: "";
    display: table;
    clear: both;
}